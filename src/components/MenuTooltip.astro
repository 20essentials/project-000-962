<aside class='menu-tooltip menu-tooltip-global'>
  <input type='checkbox' id='toggle1' /><label
    for='toggle1'
    class='toggle'
    title='Config'
    ><svg class='toggle-svg' viewBox='0 0 24 24'>
      <g
        fill='none'
        stroke='currentColor'
        stroke-linecap='round'
        stroke-linejoin='round'
        stroke-width='1.5'
        color='currentColor'
        class='toggle-svg-group'
      >
        <path
          d='M2.256 15.632c.034-.323.268-.583.736-1.104l1.031-1.153c.252-.32.431-.875.431-1.375s-.179-1.056-.43-1.375L2.991 9.472c-.468-.52-.702-.781-.736-1.104s.14-.627.49-1.234l.494-.857c.373-.648.56-.972.878-1.1c.317-.13.676-.028 1.395.176l1.22.343c.459.106.94.046 1.358-.169l.337-.194a2 2 0 0 0 .788-.968l.334-.997c.22-.66.33-.99.591-1.18C10.403 2 10.75 2 11.444 2h1.115c.694 0 1.042 0 1.303.189s.371.519.59 1.179l.335.997a2 2 0 0 0 .788.968l.337.194c.418.215.9.275 1.358.17l1.22-.344c.719-.204 1.078-.306 1.395-.177c.318.13.505.453.878 1.101l.493.857c.35.607.525.91.491 1.234s-.268.583-.736 1.104l-1.031 1.153c-.252.319-.431.875-.431 1.375s.179 1.056.43 1.375l1.032 1.153c.468.52.702.781.736 1.104s-.14.627-.49 1.234l-.494.857c-.373.648-.56.972-.878 1.1c-.317.13-.676.028-1.395-.176l-1.22-.343a2 2 0 0 0-1.359.169l-.336.194c-.36.23-.636.57-.788.968l-.334.997c-.22.66-.33.99-.591 1.18c-.261.188-.609.188-1.303.188h-1.115c-.694 0-1.041 0-1.303-.189c-.261-.189-.371-.518-.59-1.178'
          class='toggle-path-1'></path>
        <path
          d='M2.737 18.78c1.08-1.08 4.752-4.716 5.112-5.136c.381-.444.072-1.044.256-2.904c.089-.9.282-1.574.836-2.076c.66-.624 1.2-.624 3.06-.666c1.62.042 1.812-.138 1.98.282c.12.3-.24.48-.672.96c-.96.96-1.524 1.44-1.578 1.74c-.39 1.32 1.146 2.1 1.986 1.26c.318-.318 1.788-1.8 1.932-1.92c.108-.096.367-.092.492.06c.108.106.12.12.108.6c-.01.444-.006 1.082-.004 1.74c.001.852-.044 1.8-.404 2.28c-.72 1.08-1.92 1.14-3 1.188c-1.02.06-1.86-.048-2.124.144c-.216.108-1.356 1.308-2.736 2.688l-2.46 2.46c-2.04 1.62-4.284-.9-2.784-2.7'
          class='toggle-path-2'></path>
      </g></svg
    ></label
  >
  <li style='--i:0' class='circle-box cb-copy-link' title='Copy Link'>
    <button class='anchor'>
      <svg class='am-svg share-icon' viewBox='0 0 24 24'>
        <path
          fill='currentColor'
          d='M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92M18 4c.55 0 1 .45 1 1s-.45 1-1 1s-1-.45-1-1s.45-1 1-1M6 13c-.55 0-1-.45-1-1s.45-1 1-1s1 .45 1 1s-.45 1-1 1m12 7.02c-.55 0-1-.45-1-1s.45-1 1-1s1 .45 1 1s-.45 1-1 1'
          class='share-path'></path>
      </svg>
    </button>
  </li>
  <li style='--i:1' class='circle-box cb-download-file' title='Download'>
    <button class='anchor'>
      <svg class='am-svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'
        ><path
          fill='currentColor'
          d='m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z'
        ></path></svg
      >
    </button>
  </li>
  <li style='--i:2' class='circle-box cb-exit' title='Exit'>
    <button class='anchor'>
      <svg
        viewBox='0 0 24 24'
        fill='none'
        class='am-svg'
        stroke='currentColor'
        stroke-width='2'
        stroke-linecap='round'
        stroke-linejoin='round'
        ><path stroke='none' d='M0 0h24v24H0z' fill='none'></path><path
          d='M18 6l-12 12'></path><path d='M6 6l12 12'></path></svg
      >
    </button>
  </li>
  <li style='--i:3' class='circle-box'><a href='#' class='anchor'></a></li>
  <li style='--i:4' class='circle-box'><a href='#' class='anchor'></a></li>
  <li style='--i:5' class='circle-box'><a href='#' class='anchor'></a></li>
  <li style='--i:6' class='circle-box'><a href='#' class='anchor'></a></li>
  <li style='--i:7' class='circle-box'><a href='#' class='anchor'></a></li>
  <article class='fondin'></article>
</aside>

<style>
  .menu-tooltip {
    --theme-color: #fff8;
    width: 13.02vmax;
    height: 13.02vmax;
    position: fixed;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1vmax;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    zoom: 0.8;
    z-index: 500;
    border-radius: 50%;
    top: 50%;
    left: -3.3vmax;
    transform: translateY(-50%) scaleX(-1) scaleY(-1) rotate(-45deg);
    background-color: transparent;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.4s ease-in-out;

    &.menul-tooltip-open {
      opacity: 1;
      pointer-events: auto;
    }

    .fondin {
      inset: -1.8vmax;
      background-color: transparent;
      content: '';
      position: absolute;
      transform-origin: 50% 50%;
      border-radius: 50%;
      z-index: -1;
      transition: background-color 0.4s ease;
    }

    .toggle {
      width: 3.91vmax;
      height: 3.91vmax;
      line-height: 3.91vmax;
      font-size: 1.5vmax;
      text-align: center;
      border-radius: 50%;
      z-index: 999;
      position: absolute;
      cursor: pointer;
      box-shadow:
        inset 0.25vmax 0.25vmax 0.25vmax #0003,
        inset -0.25vmax -0.25vmax 0.375vmax #fff7,
        0.375vmax 0.625vmax 0.5vmax #0001,
        0.5vmax 0.375vmax 0.625vmax #0001;
      display: flex;
      flex-wrap: wrap;
      place-content: center;

      .toggle-svg {
        transition: transform 1s ease-in-out;
        width: 58%;
        height: 58%;
        color: var(--theme-color);
        transform: scaleX(-1) scaleY(-1);
      }

      &::before {
        bottom: 9%;
        right: 22%;
        --size: 0.9vmax;
      }

      &::after {
        bottom: 8%;
        right: 40%;
        --size: 0.65vmax;
      }

      &::before,
      &::after {
        position: absolute;
        content: '';
        background-color: #fff;
        border-radius: inherit;
        transform: scale(0.5);
        transition: transform 0.4s ease;
        width: var(--size);
        height: var(--size);
        opacity: 0.3;
        filter: blur(0.2vmax);
      }
    }

    #toggle1 {
      appearance: none;
      visibility: hidden;

      &:checked + .toggle .toggle-svg {
        transform: scaleX(-1) scaleY(-1) rotate(315deg);
      }

      &:checked ~ .circle-box {
        transform: rotate(calc(360deg / 8 * var(--i)));
        opacity: 1;
      }
      &:checked ~ .fondin {
        background-color: #000;
      }
    }

    .circle-box {
      position: absolute;
      left: 0;
      list-style-type: none;
      padding: 0;
      transition:
        transform 0.5s ease,
        opacity 0.5s ease 0.2s;
      transform-origin: 6.51vmax;
      transition-delay: calc(0.1s * var(--i));
      transform: rotate(0deg) translateX(4.56vmax);
      opacity: 0;
      display: flex;

      &:active {
        .anchor {
          opacity: 0.3;
        }
      }

      &:nth-of-type(1) .anchor {
        box-shadow:
          inset 0.25vmax 0.25vmax 0.25vmax #0003,
          inset -0.25vmax -0.25vmax 0.375vmax #fff7,
          0.375vmax 0.625vmax 0.5vmax #0001,
          0.5vmax 0.375vmax 0.625vmax #0001;
        transform: scale(-1) rotate(45deg);

        &:hover {
          .am-svg {
            animation: crecer 1s ease;
          }
        }
      }

      &:nth-of-type(2) .anchor {
        box-shadow:
          inset 0.25vmax 0.25vmax 0.25vmax #0003,
          inset -0.25vmax -0.25vmax 0.375vmax #fff7,
          0.375vmax 0.625vmax 0.5vmax #0001,
          0.5vmax 0.375vmax 0.625vmax #0001;
        transform: scale(-1);

        &:hover {
          .am-svg {
            animation: crecer 1s ease;
          }
        }
      }

      &:nth-of-type(3) .anchor {
        box-shadow:
          inset 0.25vmax 0.25vmax 0.25vmax #0003,
          inset -0.25vmax -0.25vmax 0.375vmax #fff7,
          0.375vmax 0.625vmax 0.5vmax #0001,
          0.5vmax 0.375vmax 0.625vmax #0001;
        transform: scale(-1) rotate(45deg);

        &:hover {
          .am-svg {
            animation: crecer 1s ease;
          }
        }
      }

      &:nth-of-type(4),
      &:nth-of-type(5),
      &:nth-of-type(6),
      &:nth-of-type(7) {
        visibility: hidden;
      }

      .anchor {
        width: 3.26vmax;
        height: 3.26vmax;
        font-size: 1.3vmax;
        line-height: 3.26vmax;
        border-radius: 50%;
        text-decoration: none;
        transform: rotate(calc(360deg / -8 * var(--i)));
        display: flex;
        flex-wrap: wrap;
        place-content: center;
        border: none;
        outline: none;
        aspect-ratio: 1;
        background-color: transparent;
        padding: 0;
        transition: opacity 0.3s ease-in-out;

        .am-svg {
          width: 58%;
          height: 58%;
          color: var(--theme-color);
          display: flex;
        }
      }
    }
  }

  @keyframes crecer {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }
</style>

<script>
  import { $ } from '@/utils/functions';
  document.addEventListener('click', e => {
    const target = e.target as HTMLElement;
    if (target.matches('.cb-copy-link') || target.matches('.cb-copy-link *')) {
      navigator.clipboard.writeText(window.location.href);
      return;
    }
    if (target.matches('.cb-exit') || target.matches('.cb-exit *')) {
      const $modalPreview = $('.modal-preview') as HTMLElement;
      if ($modalPreview?.classList.contains('open')) {
        const $menuTooltip = $('.menu-tooltip');
        $modalPreview.classList.remove('open');
        $menuTooltip?.classList.remove('menul-tooltip-open');
        return;
      }
    }
  });
</script>
